# apiVersion: helm.toolkit.fluxcd.io/v2beta1
# kind: HelmRelease
# metadata:
#   name: atlas
#   namespace: democratic-csi
# spec:
#   interval: 5m
#   chart:
#     spec:
#       chart: democratic-csi
#       version: 0.14.6
#       sourceRef:
#         kind: HelmRepository
#         name: democratic-csi
#         namespace: flux-system
#       interval: 1m
#   values:
#     driver:
#       config:
#         driver: freenas-api-nfs
#         instance_id:
#         httpConnection:
#           protocol: https
#           host: truenas.dcunha.lab
#           port: 1443
#           apiKey: 1-yK8VKRrSLbALwEdrJz1YdY2gzzVq4IEQyttToJQKTPXMoSzIlDxDvnQN062XMhn3
#           allowInsecure: true
#         zfs:
#           datasetParentName: atlas/faststorage0
#           detachedSnapshotsDatasetParentName: atlas/snapshots
#           datasetEnableQuotas: false
#           datasetEnableReservation: false
#           datasetPermissionsMode: "0777"
#           datasetPermissionsUser: 0
#           datasetPermissionsGroup: 0
#         nfs:
#           shareHost: truenas.dcunha.lab
#           shareAlldirs: true
#           shareAllowedHosts: []
#           shareAllowedNetworks: []
#           shareMaprootUser: root
#           shareMaprootGroup: root
#           shareMapallUser: ""
#           shareMapallGroup: ""
#     csiDriver:
#       name: nfs
#     storageClasses:
#     - name: atlas
#       defaultClass: false
#       reclaimPolicy: Delete
#       volumeBindingMode: Immediate
#       allowVolumeExpansion: true
#       parameters:
#         fsType: nfs
#         detachedVolumesFromSnapshots: "false"
#       mountOptions:
#       - noatime
#       - nfsvers=4
#       secrets:
#         provisioner-secret:
#         controller-publish-secret:
#         node-stage-secret:
#         node-publish-secret:
#         controller-expand-secret:
