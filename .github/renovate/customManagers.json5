{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  description: "Custom regex managers for non-standard dependency formats",
  customManagers: [
    {
      customType: "regex",
      description: "Match custom Renovate annotations in Kubernetes YAML files",
      fileMatch: ["(^|/)kubernetes/.+\\.ya?ml(?:\\.j2)?$"],
      matchStrings: [
        "# renovate: datasource=(?<datasource>\\S+) depName=(?<depName>\\S+)( repository=(?<registryUrl>\\S+))?\\n.+: (&\\S+\\s)?(?<currentValue>\\S+)",
      ],
      datasourceTemplate: "{{#if datasource}}{{{datasource}}}{{else}}github-releases{{/if}}",
    },
    {
      customType: "regex",
      description: "Match Grafana dashboard URLs for version tracking",
      fileMatch: ["(^|/)kubernetes/.+\\.ya?ml(?:\\.j2)?$"],
      matchStrings: [
        '# renovate: depName="(?<depName>.*?)"\\n.*?url: https://grafana\\.com/api/dashboards/(?<packageName>\\d+)/revisions/(?<currentValue>\\d+)/download',
      ],
      datasourceTemplate: "grafana-dashboards",
      versioningTemplate: "regex:^(?<major>\\d+)$",
    },
  ],
}
