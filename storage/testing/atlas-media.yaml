kind: PersistentVolume
apiVersion: v1
metadata:
  name: atlas-media
  labels:
    name: atlas-media
spec:
  capacity:
    storage: 40Ti
  # storageClassName: atlas
  storageClassName: nfs
  accessModes:
  - ReadWriteMany
  # csi:
  #   driver: org.democratic-csi.node-manual
  #   readOnly: false
  #   fsType: zfs
  #   volumeHandle: media # make sure it's a unique id in the cluster
  #   volumeAttributes:
  #     server: truenas.dcunha.lab
  #     share: /mnt/faststorage0/media
  #     node_attach_driver: nfs
  #     provisioner_driver: node-manual
  nfs:
    path: "/mnt/atlas/media"
    server: 10.10.99.100
  persistentVolumeReclaimPolicy: Retain
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: atlas-pvc
  namespace: default
spec:
  storageClassName: nfs
  volumeName: atlas-media
  accessModes:
  - ReadWriteMany
  resources:
    requests:
      storage: 40Ti
  selector:
    matchLabels:
      name: atlas-media
---
