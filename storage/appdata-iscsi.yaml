# helm upgrade --install --create-namespace --values appdata-iscsi.yaml --namespace democratic-csi appdata democratic-csi/democratic-csi
csiDriver:
  name: appdata

storageClasses:
- name: appdata
  defaultClass: false
  reclaimPolicy: Delete
  volumeBindingMode: Immediate
  allowVolumeExpansion: true
  parameters:
    fsType: xfs
    detachedVolumesFromSnapshots: "false"
  mountOptions: []
  secrets:
    provisioner-secret:
    controller-publish-secret:
    node-stage-secret:
    node-publish-secret:
    controller-expand-secret:

controller:
  driver:
    logLevel: debug
    image: docker.io/democraticcsi/democratic-csi:v1.8.4
    imagePullPolicy: IfNotPresent

node:
  driver:
    logLevel: debug
    image: docker.io/democraticcsi/democratic-csi:v1.8.4
    imagePullPolicy: IfNotPresent

driver:
  config:
    driver: freenas-api-iscsi
    instance_id:
    httpConnection:
      protocol: https
      host:
        valueFrom:
          secretKeyRef:
            name: variables
            key: TRUENAS_IP
      port:
        valueFrom:
          secretKeyRef:
            name: variables
            key: TRUENAS_HTTPS_PORT
      apiKey:
        valueFrom:
          secretKeyRef:
            name: variables
            key: TRUENAS_API_KEY
      allowInsecure: true
    zfs:
      datasetParentName: appdata/volumes
      detachedSnapshotsDatasetParentName: appdata/snapshots
      zvolCompression:
      zvolDedup:
      zvolEnableReservation: false
      zvolBlocksize:
    iscsi:
      targetPortal: "10.10.99.100:3260"
      targetPortals: []
      interface:
      namePrefix: csi-
      nameSuffix: "-cluster"
      targetGroups:
      - targetGroupPortalGroup: 2
        targetGroupInitiatorGroup: 3
        targetGroupAuthType: None
        targetGroupAuthGroup:
      extentInsecureTpc: true
      extentXenCompat: false
      extentDisablePhysicalBlocksize: true
      extentBlocksize: 512
      extentRpm: "SSD"
      extentAvailThreshold: 0

